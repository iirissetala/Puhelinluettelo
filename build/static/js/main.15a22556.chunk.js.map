{"version":3,"sources":["services/phonebookService.js","Notification.js","FormNewPerson.js","Person.js","Phonebook.js","App.js","index.js"],"names":["url","axios","get","then","response","data","newPerson","post","id","delete","changedPerson","put","Notification","errorMessage","message","show","className","FormNewPerson","persons","setPersons","setShow","useState","newName","setNewName","newNumber","setNewNumber","setMessage","setErrorMessage","value","onChange","e","target","type","onClick","preventDefault","name","number","some","person","window","confirm","find","p","Service","returnedPerson","map","console","log","catch","error","setTimeout","filter","addedPerson","concat","Person","deletePerson","Phonebook","showAll","setShowAll","searched","setSearced","namesToShow","toLowerCase","includes","key","App","useEffect","Services","receivedPersons","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.15a22556.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst url = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(url)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst createNew = (newPerson) => {\r\n  const request = axios.post(`${url}`, newPerson)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${url}/${id}`)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst updateNumber = (id, changedPerson) => {\r\n    const request = axios.put(`${url}/${id}`, changedPerson)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nexport default {getAll, createNew, deletePerson, updateNumber}","import React from 'react'\r\n\r\nconst Notification = ({errorMessage, message, show}) => {\r\n\r\n    if (message === null){\r\n        return null\r\n    }\r\n    if (errorMessage !== null)\r\n        return (\r\n            <div>\r\n                {show && <div className='errormessage'> {errorMessage} </div>}\r\n            </div>\r\n    )\r\n    if (message !== null){\r\n        return (\r\n            <div>\r\n                {show && <div className='message'> {message} </div>}\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default Notification","import React, {useState} from 'react'\r\nimport Service from './services/phonebookService'\r\nimport Notification from './Notification'\r\n\r\n\r\nconst FormNewPerson = ({persons, setPersons, show, setShow}) => {\r\n    const [ newName, setNewName ] = useState('')\r\n    const [ newNumber, setNewNumber ] = useState('')\r\n    const [ message, setMessage ] = useState('')\r\n    const [ errorMessage, setErrorMessage ] = useState('')\r\n    \r\n\r\n    const handleNameChange = (e) => setNewName(e.target.value)\r\n    const handleNumberChange = (e) => setNewNumber(e.target.value)\r\n\r\n    const addName = (e) => {\r\n        e.preventDefault()\r\n        const newPerson = {name: newName, number: newNumber}\r\n        if (persons.some(person => person.name === newName)){\r\n            if(window.confirm(`${newName} is already in the phonebook, replace existing number?`)){\r\n                const person = persons.find(p => p.name === newName)\r\n                const changedPerson = {...person, number: newNumber }\r\n                Service\r\n                    .updateNumber(person.id, changedPerson)\r\n                    .then(returnedPerson => {\r\n                        setPersons(persons.map(p => p.name !== newName ? p : returnedPerson))\r\n                        console.log(changedPerson, returnedPerson)\r\n                    })\r\n                    .catch(error => {\r\n                        setErrorMessage(\r\n                            `${newName} was already deleted from server`\r\n                        )\r\n                        setShow(true)\r\n                        setTimeout(() => {\r\n                            setErrorMessage(null)\r\n                            setShow(false)\r\n                        }, 5000)\r\n                        setPersons(persons.filter(p => p.name !== newName))\r\n                    })\r\n                    \r\n                }\r\n        } else {\r\n            Service\r\n                .createNew(newPerson)\r\n                .then(addedPerson => \r\n                    setPersons(persons.concat(addedPerson)))\r\n  \r\n        }\r\n        setMessage(`Added: ${newName}`)\r\n        setShow(true)\r\n        setTimeout(() => {\r\n            setMessage(null)\r\n            setShow(false)\r\n        }, 3000)\r\n        setNewName('')\r\n        setNewNumber('')\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form>\r\n                <div>name: <input value={newName} onChange={handleNameChange}/></div>\r\n                <div>number: <input value={newNumber} onChange={handleNumberChange} /></div>\r\n                <div><button type=\"submit\" onClick={addName}>add</button></div>\r\n                <Notification message={message} errorMessage={errorMessage} show={show} />\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FormNewPerson","import React from 'react'\r\n\r\nconst Person = ({person, deletePerson}) => {\r\n    const handleDelete = () => {\r\n        if (window.confirm(`Delete ${person.name} ?`)){\r\n            deletePerson()\r\n        }\r\n    }\r\n    return(\r\n        <p>{person.name} {person.number} <button onClick={handleDelete}>delete</button></p>\r\n    )\r\n}\r\n\r\nexport default Person","import React, {useState} from 'react'\r\nimport Person from './Person'\r\nimport Service from './services/phonebookService'\r\n\r\nconst Phonebook = ({persons, setPersons, show, setShow}) => {\r\n    const [ showAll, setShowAll ] = useState(true)\r\n    const [ searched, setSearced ] = useState('')\r\n  \r\n    \r\n    const namesToShow = showAll\r\n        ? persons\r\n        : persons.filter(p => p.name.toLowerCase().includes(searched.toLowerCase()))\r\n\r\n    const addedPersons = () => namesToShow.map(person =>\r\n        <Person\r\n            key={person.name}\r\n            person={person}\r\n            deletePerson={() => deletePerson(person.id)}\r\n            />)\r\n\r\n    const deletePerson = id => {\r\n        Service\r\n            .deletePerson(id)\r\n            .then(\r\n                setPersons(persons.filter(p => p.id !== id))\r\n            )\r\n            \r\n    }\r\n    \r\n    const handleSearch = (e) => {\r\n        setSearced(e.target.value)\r\n        setShowAll(false)\r\n    } \r\n\r\n\r\n    return(\r\n        <div>\r\n            <div>\r\n            filter shown names by <input value={searched} onChange={handleSearch}></input>\r\n            </div>\r\n            <div>{addedPersons()}</div>\r\n        </div>\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default Phonebook","import React, {useState, useEffect} from 'react'\r\nimport FormNewPerson from './FormNewPerson'\r\nimport Phonebook from './Phonebook'\r\nimport Services from './services/phonebookService'\r\n\r\n\r\nconst App = () => {\r\n    const [ persons, setPersons] = useState([]) \r\n    const [ show, setShow ] = useState(false)\r\n\r\n    useEffect(() => {\r\n      Services\r\n        .getAll()\r\n        .then(receivedPersons => {\r\n          setPersons(receivedPersons)\r\n          console.log('data vastaanotettu ja puhelinluettelo alustettu')\r\n        })\r\n    }, [])\r\n    console.log('palautui', persons.length, 'henkilöä')\r\n\r\n    return (\r\n      <div>\r\n        <h2>Phonebook</h2>\r\n        <h3>Numbers</h3>\r\n        <Phonebook persons={persons} setPersons={setPersons} show={show} setShow={setShow} />\r\n        <h3>Add new name</h3>\r\n        <FormNewPerson persons={persons} setPersons={setPersons} show={show} setShow={setShow} />        \r\n      </div>\r\n    )\r\n  \r\n  }\r\n\r\nexport default App\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.js';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n"],"sourceRoot":""}